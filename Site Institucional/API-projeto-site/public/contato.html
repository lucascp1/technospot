<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/child.css">
    <link rel="stylesheet" href="css/aplicacao.css">
    <link rel="shortcut icon" href="svg/shortcut-logo.svg" type="image/x-icon">
    <title>Contato | Techno Spot | Inc</title>
</head>

<body class="body-contato">
    <!-- Header -->
    <header class="header-nav">
        <nav class="nav">
            <!-- Logo Menu -->
            <div class="nav-logo">
                <a href="index.html"><img src="svg/logo.svg" alt="Logo"></a>
            </div>
            <!-- Fim Logo Menu -->
            <!-- Itens Menu -->
            <ul id="itens_menu">
                <li><a href="index.html">HOME</a></li>
                <li><a href="sobre.html">SOBRE</a></li>
                <li><a href="contato.html" class="active">CONTATO</a></li>
            </ul>
            <!-- Fim Itens Menu -->
            <!-- Botão Login -->
            <div class="nav-btn" href="#">
                <a class="btn btn-nav" href="login.html">LOGIN</a>
            </div>
            <!-- Fim Botão Login -->
        </nav>
    </header>
    <!-- Fim Header -->
    <section class="container-contato">
        <section class="content-contato">
            <div>
                <h1>CONT<span class="border-h1-bottom">ATO</span></h1>
            </div>
            <form class="inputs-contato" id="form_contato" method="post" onsubmit="return contato()">
                <section>
                    <div class="inputs-form">
                        <label for="">Nome completo:</label>
                        <input onkeyup="validacao_nome_contato()" id="ipt_nome_contato"
                            class="inputs-template input-nome" name="nomeContato" type="text"
                            placeholder="Fulano Silva">
                    </div>
                    <div class="inputs-form">
                        <label for="">E-mail:</label>
                        <input onkeyup="validacao_email_contato()" id="ipt_email_contato"
                            class="inputs-template input-nome" name="emailContato" type="text"
                            placeholder="Digite seu e-mail">
                    </div>
                    <div class="inputs-form">
                        <label for="">Telefone:</label>
                        <input onkeyup="validacao_telefone_contato()" id="ipt_telefone_contato"
                            class="inputs-template input-nome" name="telefoneContato" type="text"
                            placeholder="Digite seu telefone">
                    </div>
                    <div class="div-but">
                        <button onclick="enviar()" class="btn btn-form" type="button">ENVIAR</button>
                        <span class="span_msg" id="span_msg"></span>
                    </div>
                </section>
                <div class="inputs-form">
                    <label for="">Mensagem:</label>
                    <textarea id="ipt_mensagem_contato" cols="30" rows="10" name="mensagem" placeholder="Digite sua mensagem"></textarea>
                </div>
            </form>
        </section>
    </section>
    <footer class="footer">
        <div class="container-footer">
            <!-- Texto Rodapé -->
            <article class="footer-about">
                <a href="index.html"><img src="svg/logo.svg" alt="Logo"></a>
                <p>Fundada com o intuito de difundir o Techno e
a música eletrônica em geral, para pessoas 
que já conhecem ou querem conhecer.</p>
            </article>
            <!-- Fim Rodapé -->
            <!-- Itens Rodapé -->
            <div class="nav-footer">
                <ul>
                    <li class="footer-title"><a href="index.html">HOME</a></li>
                    <li><a href="index.html">Principal</a></li>
                </ul>
                <ul>
                    <li class="footer-title"><a href="sobre.html">SOBRE</a></li>
                    <li><a href="sobre.html">História</a></li>
                </ul>
                <ul>
                    <li class="footer-title"><a href="contato.html">CONTATO</a></li>
                    <li><a href="contato.html">Contato</a></li>
                </ul>
            </div>
            <!-- Fim Itens Rodapé -->
        </div>
        <!-- Texto Copyright -->
        <div class="copyright">
            <span>© 2021 Techno Spot</span>
        </div>
        <!-- Fim Texto Copyright -->
    </footer>
    <!-- Fim Rodapé -->
</body>

</html>

<script>
    // FUNCÃO CONTATO API 

    var nomeSobrenomeReg = /^[a-zA-Z ]{3,}$/;
    var emailReg = /^([A-z0-9._-]+@[a-z0-9._-]+\.[A-z0-9_-]+)$/;
    var telefoneReg = /^[(]?[0-9]{2,3}[)]?[0-9]{4,5}\-?[0-9]{4}$/;
    var mensagemReg = /^.{3,500}$/;


    function validacao_nome_contato() {

        var ipt_nome = ipt_nome_contato.value;

        if (ipt_nome.match(nomeSobrenomeReg)) {
            ipt_nome_contato.style.border = '1.5px solid var(--green)';
        } else {
            ipt_nome_contato.style.border = '1.5px solid red';
        }
    }

    function validacao_email_contato() {

        var ipt_email = ipt_email_contato.value;

        if (ipt_email.match(emailReg)) {
            ipt_email_contato.style.border = '1.5px solid var(--green)';
        } else {
            ipt_email_contato.style.border = '1.5px solid red';
        }
    }

    function validacao_telefone_contato() {

        var ipt_telefone = ipt_telefone_contato.value;

        if (ipt_telefone.match(telefoneReg)) {
            ipt_telefone_contato.style.border = '1.5px solid var(--green)';
        } else {
            ipt_telefone_contato.style.border = '1.5px solid red';
        }
    }

    function validacao_mensagem_contato() {

        var ipt_mensagem = ipt_mensagem_contato.value;

        if (ipt_telefone.match(telefoneReg)) {
            ipt_mensagem_contato.style.border = '1.5px solid var(--green)';
        } else {
            ipt_mensagem_contato.style.border = '1.5px solid red';
        }
    }

    function enviar() {

        var ipt_nome = ipt_nome_contato.value;
        var ipt_email = ipt_email_contato.value;
        var ipt_telefone = ipt_telefone_contato.value;
        var ipt_mensagem = ipt_mensagem_contato.value;

        if (ipt_nome.match(nomeSobrenomeReg) && ipt_email.match(emailReg) && ipt_telefone.match(telefoneReg) &&  ipt_mensagem.match(mensagemReg)) {
            contato();
        } else {
            span_msg.innerHTML = "Verifique os campos";
        }
    }


    function contato() {
        var formulario_contato = new URLSearchParams(new FormData(form_contato));
        fetch("/usuarios/contato", {
            method: "POST",
            body: formulario_contato
        }).then(function (response) {

            if (response.ok) {

            span_msg.innerHTML = "Mensagem enviada com sucesso";
            span_msg.style.color = 'var(--green)';
            
            ipt_nome_contato.value = '';
            ipt_email_contato.value = ''; 
            ipt_telefone_contato.value = '';
            ipt_mensagem_contato.value = '';

            } else {
                console.log('Erro de cadastro!');
            }
        });

        return false;
    }
</script>